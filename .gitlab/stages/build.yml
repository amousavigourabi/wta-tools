build-core:
  stage: build
  dependencies: []
  needs: []

  script:
    - echo "Build core started"
    - "mvn -pl core install -DskipTests"

  artifacts:
    name: build-core
    expire_in: 2 hours
    paths:
      - core/target
      - .m2/repository/com/asml/apa

build-spark-adapter:
  stage: build

  needs: [build-core]
  dependencies:
    - build-core

  script:
    - echo "Build Spark adapter started"
    - "mvn -pl adapter/spark process-test-classes"

  artifacts:
    name: build-spark-adapter
    expire_in: 2 hours
    paths:
      - adapter/spark/target
      - .m2/repository/com/asml/apa
