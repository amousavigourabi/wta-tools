include:
  - template: Jobs/SAST.gitlab-ci.yml
  - template: Jobs/Dependency-Scanning.gitlab-ci.yml
  - template: Code-Quality.gitlab-ci.yml


spotless:
  stage: checks

  script:
    - echo "Spotless check started"
    - "mvn spotless:check"


sast:
  stage: checks


dependency_scanning:
  stage: checks


code_quality:
  stage: checks


spotbugs-sast:
  stage: checks
  allow_failure: true

  variables:
    COMPILE: "false"
    artifacts:
      reports:
        sast: gl-sast-report.json


semgrep-sast:
  stage: checks
  allow_failure: true

  variables:
    COMPILE: "false"


gemnasium-dependencies:
  stage: checks
  allow_failure: true

  script:
    - echo "Gemnasium dependency check started"
    - "mvn gemnasium:dump-dependencies"
    - "mvn -pl core gemnasium:dump-dependencies"
    - "mvn -pl adapter/spark gemnasium:dump-dependencies"


pmd:
  stage: checks

  script:
    - echo "PMD checks started"
    - "mvn pmd:check"
